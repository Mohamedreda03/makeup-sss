# ุฏููู ุชุฑุญูู ุงููุธุงู ุฅูู ุงูุชูููุช ุงููุตุฑู

## ุงูููุฎุต

ุชู ุชุทุจูู ุงูุชุนุฏููุงุช ุงููุทููุจุฉ ูุญูุธ ุงูุฃููุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุงูุชูููุช ุงููุตุฑู ูุจุงุดุฑุฉ ุจุฏูุงู ูู UTC.

## ุงูุชุนุฏููุงุช ุงููุทุจูุฉ

### 1. ููู ุฏูุงู ุงูุชูููุช (`src/lib/timezone-config.ts`)

- โ ุฅุถุงูุฉ `convertAvailabilityToEgyptStorage()` - ูุญูุธ ุฅุนุฏุงุฏุงุช ุงูุชููุฑ ุจุงูุชูููุช ุงููุตุฑู
- โ ุฅุถุงูุฉ `toEgyptStorageString()` - ูุชุญููู ุงูุชุงุฑูุฎ ูุงูููุช ุฅูู ูุต ุชุฎุฒูู ุจุงูุชูููุช ุงููุตุฑู
- โ ุฅุถุงูุฉ `createEgyptStorageDate()` - ูุฅูุดุงุก ุชูุงุฑูุฎ ูุน ุงูุชูููุช ุงููุตุฑู ููุชุฎุฒูู
- โ ุฅุถุงูุฉ `convertWorkingHoursToEgyptStorage()` - ูุญูุธ ุณุงุนุงุช ุงูุนูู ุจุงูุชูููุช ุงููุตุฑู

### 2. API ุงูุฎุงุต ุจุฅุนุฏุงุฏุงุช ุชููุฑ ุงูููุงููู (`src/app/api/artist/availability/route.ts`)

- โ ุชุบููุฑ ูู `convertAvailabilityToUTC()` ุฅูู `convertAvailabilityToEgyptStorage()`
- โ ุฅุถุงูุฉ ุขููุฉ ููุชุญูู ูู ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ ููุงุจู ุงููุฏููุฉ
- โ ุฅุฒุงูุฉ ุงูุงุณุชูุฑุงุฏุงุช ุบูุฑ ุงููุณุชุฎุฏูุฉ

### 3. API ุงูุฎุงุต ุจุงูููุงุนูุฏ (`src/app/api/appointments/route.ts`)

- โ ุชุบููุฑ ูู `toEgyptISOString()` ุฅูู `toEgyptStorageString()`
- โ ุชุญุฏูุซ ุงูููุทู ููุญูุธ ุงูููุงุนูุฏ ุจุงูุชูููุช ุงููุตุฑู ูุจุงุดุฑุฉ
- โ ุฅุฒุงูุฉ ุงูุงุณุชูุฑุงุฏุงุช ุบูุฑ ุงููุณุชุฎุฏูุฉ

### 4. API ุงูุฎุงุต ุจุทูุจุงุช ุงูููุงุนูุฏ (`src/app/api/appointment-requests/route.ts`)

- โ ุงุณุชุฎุฏุงู `createEgyptStorageDate()` ูุฅูุดุงุก ููุงุนูุฏ ุจุงูุชูููุช ุงููุตุฑู
- โ ุชุญุฏูุซ ุงูููุทู ููุชุนุงูู ูุน ุงูุชูููุช ุงููุตุฑู ูุชูููุช ุฃุณุงุณู

### 5. API ุนุฑุถ ุชููุฑ ุงูููุงููู (`src/app/api/artists/[id]/availability/route.ts`)

- โ ุฅุถุงูุฉ ุขููุฉ ููุชุญูู ูู ููุน ุงูุจูุงูุงุช ุงููุญููุธุฉ (ุฌุฏูุฏุฉ ุฃู ูุฏููุฉ)
- โ ุฏุนู ุงูุจูุงูุงุช ุงููุฏููุฉ ูุน ุงูุชุญููู ุงูุชููุงุฆู
- โ ูุนุงูุฌุฉ ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ ุงููุญููุธุฉ ุจุงูุชูููุช ุงููุตุฑู ูุจุงุดุฑุฉ

### 6. ุชูุธูู ุงูููููุงุช (`src/components/booking/ArtistBooking.tsx`)

- โ ุฅุฒุงูุฉ ุงูุงุณุชูุฑุงุฏุงุช ุบูุฑ ุงููุณุชุฎุฏูุฉ

### 7. ุฅูุดุงุก script ุงูุชุฑุญูู (`scripts/migrate-timezone-storage.ts`)

- โ script ูุชุญููู ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ูู UTC ุฅูู ุงูุชูููุช ุงููุตุฑู
- โ ูุนุงูุฌุฉ ุฅุนุฏุงุฏุงุช ุชููุฑ ุงูููุงููู ูุงูููุงุนูุฏ

### 8. ุชุญุฏูุซ package.json

- โ ุฅุถุงูุฉ `"migrate:timezone": "npx tsx scripts/migrate-timezone-storage.ts"`

## ููููุฉ ุชุดุบูู ุงููุธุงู ุงูุฌุฏูุฏ

### ุงูุฎุทูุฉ 1: ุงูุชุฃูุฏ ูู ุชุซุจูุช ุงููุชุทูุจุงุช

```powershell
npm install
```

### ุงูุฎุทูุฉ 2: ุชุดุบูู script ุงูุชุฑุญูู (ุงุฎุชูุงุฑู - ููุจูุงูุงุช ุงูููุฌูุฏุฉ)

```powershell
npm run migrate:timezone
```

**ููุงุญุธุฉ**: ูุฐุง Script ุขูู ููู ูุคุซุฑ ุนูู ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ ุงููุญููุธุฉ ุจุงููุนู ุจุงูุชูููุช ุงููุตุฑู.

### ุงูุฎุทูุฉ 3: ุชุดุบูู ุงูุชุทุจูู

```powershell
npm run dev
```

## ุงูุชุญูู ูู ูุฌุงุญ ุงูุชุฑุญูู

### 1. ูุญุต ุฅุนุฏุงุฏุงุช ุชููุฑ ุงูููุงู

- ุงุฐูุจ ุฅูู `/artist-dashboard/availability`
- ูุฌุจ ุฃู ุชุฑู ุฑุณุงูุฉ: "Times are stored in Egypt timezone"
- ุงูุฃููุงุช ุงููุนุฑูุถุฉ ูุฌุจ ุฃู ุชููู ุจุงูุชูููุช ุงููุตุฑู

### 2. ูุญุต ุงูููุงุนูุฏ ุงูุฌุฏูุฏุฉ

- ุงุญุฌุฒ ููุนุฏ ุฌุฏูุฏ
- ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช - ูุฌุจ ุฃู ูููู ุงูููุช ูุญููุธ ุจู `+02:00` ุฃู `+03:00`

### 3. ูุญุต logs ุงูุชุทุจูู

```
Egypt date/time input: 2025-06-15 14:30
Converted to Egypt storage: 2025-06-15T14:30:00.000+02:00
```

## ุงูููุงุฆุฏ ุงูุฌุฏูุฏุฉ

### โ ุซุจุงุช ุงูุชูููุช

- ุงูุฃููุงุช ุชุจูู ููุง ูู ุจุบุถ ุงููุธุฑ ุนู ููุทูุฉ ุฒูููุฉ ุงูุณูุฑูุฑ
- ูุง ุชุญุฏุซ ูุดุงูู ุนูุฏ ุงููุดุฑ ุนูู ุณูุฑูุฑุงุช ูุฎุชููุฉ

### โ ุณูููุฉ ุงูุตูุงูุฉ

- ูุง ุญุงุฌุฉ ูุชุญูููุงุช ูุนูุฏุฉ ุจูู UTC ูุงูุชูููุช ุงููุตุฑู
- ุงูุจูุงูุงุช ูุงุถุญุฉ ููููููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### โ ุฏูุฉ ุงูููุงุนูุฏ

- ุชุฌูุจ ุงูุฃุฎุทุงุก ุงููุงุชุฌุฉ ุนู ุชุญูููุงุช ุงูููุงุทู ุงูุฒูููุฉ
- ุถูุงู ุนุฑุถ ุงูุฃููุงุช ุงูุตุญูุญุฉ ููุนููุงุก

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฅุฐุง ุธูุฑุช ุฃููุงุช ุฎุงุทุฆุฉ:

1. ุชุดุบูู script ุงูุชุฑุญูู ูุฑุฉ ุฃุฎุฑู
2. ูุญุต ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุชุฃูุฏ ูู ูุฌูุฏ `storageType: "EGYPT_TIME"`

### ุฅุฐุง ูู ุชุนูู ุงูููุงุนูุฏ ุงูุฌุฏูุฏุฉ:

1. ูุญุต console logs ููุชุฃูุฏ ูู ุงุณุชุฎุฏุงู `toEgyptStorageString()`
2. ุงูุชุฃูุฏ ูู ุฃู ุงูุชุทุจูู ูุณุชุฎุฏู ุงูุฏูุงู ุงูุฌุฏูุฏุฉ

## ููุงุญุธุงุช ูููุฉ

- โ ุงููุธุงู ูุฏุนู ุงูุจูุงูุงุช ุงููุฏููุฉ ูุงูุฌุฏูุฏุฉ ุชููุงุฆูุงู
- โ ูุง ุญุงุฌุฉ ูุชุบููุฑ ุฃู ุดูุก ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ
- โ ุงูุนููุงุก ุณูุฑูู ููุณ ุงูุฃููุงุช ููุง ูุงูุช ูู ูุจู
- โ ุงููุธุงู ุขูู ููุชูุงูู ูุน ุงูุฅุตุฏุงุฑุงุช ุงูุณุงุจูุฉ

## ุชู ุงูุงูุชูุงุก ูู ุงูุชุญุฏูุซ! ๐

ุงููุธุงู ุงูุขู ูุญูุธ ููุนุฑุถ ุฌููุน ุงูุฃููุงุช ุจุงูุชูููุช ุงููุตุฑู ูุจุงุดุฑุฉุ ููุง ูุถูู ุงูุซุจุงุช ูุงูุฏูุฉ ุนุจุฑ ุฌููุน ุงูุจูุฆุงุช.
